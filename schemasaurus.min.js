(function(e){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=e()}else if(typeof define==="function"&&define.amd){define([],e)}else{var r;if(typeof window!=="undefined"){r=window}else if(typeof global!=="undefined"){r=global}else if(typeof self!=="undefined"){r=self}else{r=this}r.schemasaurus=e()}})(function(){var e,r,t;return function n(e,r,t){function i(s,o){if(!r[s]){if(!e[s]){var l=typeof require=="function"&&require;if(!o&&l)return l(s,!0);if(a)return a(s,!0);var f=new Error("Cannot find module '"+s+"'");throw f.code="MODULE_NOT_FOUND",f}var p=r[s]={exports:{}};e[s][0].call(p.exports,function(r){var t=e[s][1][r];return i(t?t:r)},p,p.exports,n,e,r,t)}return r[s].exports}var a=typeof require=="function"&&require;for(var s=0;s<t.length;s++)i(t[s]);return i}({1:[function(e,r,t){"use strict";function n(e){return JSON.parse(JSON.stringify(e))}function i(e){this.path=e?e.slice():[];this.stack=new Array(100);this.si=0;this.parent=null;this.property=null;this.self=null}i.prototype={replace:function(e){this.parent[this.property]=e},remove:function(){delete this.parent[this.property]},push:function(e,r,t){this.path.push(e);this.stack[this.si]=[e,r,t];this.si++;this.property=e;this.parent=r;this.self=t},stop:function(){this.stopped=true},isStopped:function(){if(this.stopped){this.stopped=false;return true}return false},pop:function(){this.si--;this.path.pop();var e=this.stack[this.si];if(e){this.parent=e[0];this.property=e[1];this.self=e[2]}}};var a=i;function s(){throw new Error("Remote refs are not supported for now :(")}function o(e,r,t){function n(e){return e.replace(/~0/g,"~").replace(/~1/g,"/")}var i=decodeURI(t).split("#"),a=i[0],s=i[1].split("/").map(n),o=r,l;if(a!==""){o=e(a)}for(l=0;l<s.length;l=l+1){if(s[l]===""){continue}o=o[s[l]];if(o===undefined){throw new Error("Cannot find ref '"+t+"' in schema")}}return o}function l(e){var r="",t="  ",n,i,a,s;for(i=0;i<e.length;i=i+1){n=e[i].trim();a=n.indexOf("{")!==-1;s=n.indexOf("}")!==-1;if(s&&!a){r=r.substring(0,r.length-t.length)}n=r+n;if(a&&!s){r=r+t}e[i]=n}return e}var f=/(\[(\^?\w+)(=\w+)?\])/g;var p=/:([-\w]+)$/;function u(e){if(e===null){return null}var r=parseFloat(e);if(!isNaN(r)){return r}if(e==="true"){return true}if(e==="false"){return false}return e}function h(e,r){if(e.indexOf(":")!==-1||e.indexOf("[")!==-1){var t=p.exec(e),n=[],i,a,s,o;if(t){i=t[1]}t=f.exec(e);while(t){a=t[2][0]==="^";n.push({name:a?t[2].substring(1):t[2],not:a,value:t[3]?u(t[3].substring(1)):undefined});t=f.exec(e)}return function(t,a,l){var f,p=true;if(a!==i){return false}for(s=0;s<n.length;s=s+1){f=t[n[s].name];if(n[s].not){o=f===undefined||f!==n[s].value&&n[s].value!==undefined}else{o=f!==undefined&&(f===n[s].value||n[s].value===undefined)}if(!o){p=false;break}}if(p){return l(r[e],e)}}}}function c(e,r,t,f){if(!r||typeof r!=="function"){throw new Error("selectorCtor shall be a function")}t=t||{};t.ignoreAdditionalItems=t.ignoreAdditionalItems===undefined?false:t.ignoreAdditionalItems;var p=[],u=n(e),d=r(),m=[],y,g,v,b=0,x,A=[],O=new a(f),w=u,I=[];function j(e,r,t){var n,i,a;if(!v){v=[];for(i in d){a=h(i,d);if(a){v.push(a)}}}for(n=0;n<v.length;n=n+1){v[n](e,r,t)}}function P(){var e="i"+m.length;m.push(e);return e}function _(e,r,n,i,a,s){var o,l,f=false;if(e.prepare||{1:1,2:1}[e.length]){e=(e.prepare||e).call(d,i,O);f=true}if(!e)return;p.push("//call "+r);if(e.inline){if(typeof e.inline==="function"&&t.noinline){I.push(e.inline);p.push((s?"return ":"")+"innerFns["+(I.length-1)+"].call(this, "+n+", ctx)");if(a)p.push("if (ctx.isStopped()) break "+a)}else{x="label"+b++;o=e.inline.toString().replace(/^function\s*\([^)]*\)/,"").replace(/_/g,n);var u=o.indexOf("return")!==-1;if(a){o=o.replace(/ctx.stop\(\)/,"break "+a)}if(!s){o=o.replace(/return/g,"break "+x)}for(l in e){if(e.hasOwnProperty(l)&&l!=="inline"){o=o.replace(new RegExp(l,"g"),JSON.stringify(e[l]))}}p=p.concat((u?x+":{"+o+"}":o).split(/[\n\r]+/))}}else if(f){A.push(i);I.push(e);p.push((s?"return ":"")+"innerFns["+(I.length-1)+"].call(this, schemas["+(A.length-1)+"], "+n+", ctx)");if(a)p.push("if (ctx.isStopped()) break "+a)}else{A.push(i);p.push((s?"return ":"")+"this['"+r+"'](schemas["+(A.length-1)+"], "+n+", ctx)");if(a)p.push("if (ctx.isStopped()) break "+a)}}O.compile=function(e,n){if(Array.isArray(e)){I.push(O[n]=e.map(function(e){return c(e,r,t,O.path.slice())}))}else{I.push(O[n]=c(e,r,t,O.path.slice()))}p.push("ctx."+n+" = innerFns["+(I.length-1)+"]")};function F(e,r,n){var i,a,l,f;n=n||{};if(e.$$visited){p.push("if ("+r+" !== undefined) self("+r+",this);");return}Object.defineProperty(e,"$$visited",{value:true,enumerable:false,configurable:true});if(e.$ref){F(o(t.loader||s,w,e.$ref),r,n);return}function u(t){var n=p.length+1,i="label"+b++;p.push(i+": {");j(e,t,function(t,n){_(t,n,r,e,i)});if(p.length===n){p.pop()}else{p.push("}")}}if(n.path){p.push("ctx.push("+n.path+", "+n.parent+","+r+")");O.push(n.path,n.parentSchema,e)}["oneOf","anyOf","allOf","not"].forEach(function(r){if(e[r]){O.compile(e[r],r)}});if(n.attr){u(n.attr)}u("start");u();if(e.properties||e.additionalProperties||e.patternProperties){if(!t.ignoreAdditionalItems){f=P();p.push(f+" = {}")}for(i in e.properties){if(e.properties.hasOwnProperty(i)){a=P();p.push(a+" = "+r+" ? "+r+"."+i+" : undefined");if(!t.ignoreAdditionalItems){p.push(f+"."+i+" = true")}F(e.properties[i],a,{path:"'"+i+"'",parent:r,parentSchema:e})}}if(!t.ignoreAdditionalItems){l=P();p.push("if (typeof "+r+" === 'object' && !Array.isArray("+r+")) for ("+l+" in "+r+") if ("+r+".hasOwnProperty("+l+")) {");a=P();p.push(a+" = "+r+"["+l+"]");for(i in e.patternProperties||{}){if(e.patternProperties.hasOwnProperty(i)){p.push("if (/"+i+"/.test("+l+")) {");F(e.patternProperties[i],a,{path:l,parent:r,parentSchema:e});p.push(f+"["+l+"] = true");p.push("}")}}p.push("if (!"+f+"["+l+"]) {");if(e.additionalProperties===false){F({additionalProperty:false},a,{path:l,parent:r,parentSchema:e})}else if(typeof e.additionalProperties==="object"){F(e.additionalProperties,a,{path:l,parent:r,parentSchema:e})}else{F({additionalProperty:"allowed"},a,{path:l,parent:r,parentSchema:e})}p.push("}");p.push("}")}}if(e.items||e.additionalItems){if(!Array.isArray(e.items)){l=P();p.push("for ("+l+" = 0; "+l+" < ("+r+" ? "+r+".length : 0); "+l+"++) {");a=P();p.push(a+" = "+r+"["+l+"]");F(e.items,a,{attr:"item",path:l,parent:r,parentSchema:e});p.push("}");if(!t.ignoreSchemaOnly){p.push("if (schemaOnly) {");F(e.items,"nil",{attr:"item",path:"'[]'",parent:r,parentSchema:e});p.push("}")}}else{for(i=0;i<e.items.length;i=i+1){a=P();p.push(a+" = "+r+" ? "+r+"["+i+"] : undefined");F(e.items[i],a,{path:"'"+i+"'",parent:r,parentSchema:e})}if(!t.ignoreAdditionalItems){l=P();p.push("for ("+l+" = "+e.items.length+"; "+l+" < ("+r+" ? "+r+".length : 0); "+l+"++) {");a=P();p.push(a+" = "+r+"["+l+"]");if(e.additionalItems===false){F({additionalItem:false},a,{path:l,parent:r,parentSchema:e})}else if(typeof e.additionalItems==="object"){F(e.additionalItems,a,{path:l,parent:r,parentSchema:e})}else{F({additionalItem:"allowed"},a,{path:l,parent:r,parentSchema:e})}p.push("}")}}}u("end");if(n.attr){u(n.attr+"-end")}if(n.path){p.push("ctx.pop();");O.pop()}delete e.$$visited}F(u,"val");if(d.done){_(d.done,"done","val",u,null,true)}var S=l(p).map(function(e){return"{};".indexOf(e[e.length-1])===-1?e+";":e}).join("\n");S=["var self; selector._f = function(val) { var nil = undefined, schemaOnly = val === undefined"].concat(m).join(",")+";\nctx.self=val;\n"+S+"}; self = function (val) {"+(d.reset?"selector.reset();":"")+"return selector._f(val) }; self.fn = selector._f; return self; ";try{g=new Function("selector","schemas","innerFns","ctx",S)}catch(q){console.error(S);throw q}var $=new i(f);var k=d.clone?d.clone():r();y=g(k,A,I,$);return y}r.exports=c},{}],2:[function(e,r,t){"use strict";var n=e("./compiler");var i=e("./v4validator");var a=e("./normalizer");r.exports={Validator:i,Normalizer:a,compile:n,newIterator:n,newValidator:function(e,r){return n(e,i.factory(r),r)},newNormalizer:function(e){return n(e,a.factory)}}},{"./compiler":1,"./normalizer":3,"./v4validator":4}],3:[function(e,r,t){"use strict";function n(){}n.prototype={"[default]":function(e,r,t){if(r===null||r===undefined){t.replace(e.default)}},"[additionalProperty]":function(e,r,t){t.remove()},"[type]":function(e,r,t,n){if(r===null||r===undefined)return;switch(e.type){case"null":t.replace(null);break;case"string":t.replace(r.toString());break;case"integer":t.replace(parseInt(r));break;case"number":t.replace(parseFloat(r));break;case"boolean":var i=["true","on"].indexOf(r.toLowerCase())!=-1;var a=["false","off"].indexOf(r.toLowerCase())!=-1;t.replace(i?true:a?false:!!r);break;case"array":if(!Array.isArray(r)){t.replace([r])}break;case"object":break}},done:{inline:"return _"}};n.factory=function(){return new n};r.exports=n},{}],4:[function(e,r,t){"use strict";function n(e){return{"type.string":e("shall be a string"),"type.null":e("shall be null"),"type.string.minLength":e("shall have length at least %d"),"type.string.maxLength":e("shall have length no more than %d"),"type.string.pattern":e("shall match pattern %s"),"type.integer":e("shall be an integer"),"type.integer.multipleOf":e("shall be multiple of %d"),"type.number":e("shall be a number"),"type.number.minimum":e("shall be >= %d"),"type.number.minimum.exclusive":e("shall be > %d"),"type.number.maximum":e("shall be <= %d"),"type.number.maximum.exclusive":e("shall be < %d"),"type.boolean":e("shall be boolean"),"type.object":e("shall be object"),"type.object.required":e("is required"),"type.object.additionalProperties":e("shall not have additional properties"),"type.object.minProperties":e("shall have at least %d properties"),"type.object.maxProperties":e("shall have no more than %d properties"),"type.array":e("shall be array"),"type.array.additionalItems":e("shall not have additional items"),"type.array.minItems":e("shall have at least %d items"),"type.array.maxItems":e("shall have no more %d items"),"type.array.uniqueItems":e("shall have unique items"),"type.enum":e("shall be one of values %s"),required:e("is required"),dependency:e("does not meet additional requirements for %s"),not:e("does not meet 'not' requirement"),oneOf:e("does not meet exactly one requirement"),"oneOf.zero":e("does not meet any requirement"),allOf:e("does not meet all requirements"),anyOf:e("does not meet any requirement")}}function i(e){return typeof e==="object"&&!Array.isArray(e)&&e!==null}function a(e){e.email=e.email||{regexp:/^[^@]+@[^@]+$/,message:"shall be valid email"};e["date-time"]=e["date-time"]||{regexp:/^\d{4}-(?:0[0-9]{1}|1[0-2]{1})-[0-9]{2}[tT ]\d{2}:\d{2}:\d{2}(\.\d+)?([zZ]|[+-]\d{2}:\d{2})$/,message:"shall be valid date"};e.ipv4=e.ipv4||{regexp:/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/,message:"shall be valid ipv4 address"};e.ipv6=e.ipv6||{regexp:/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/,message:"shall be valid ipv6 address"};e.uri=e.uri||{regexp:/^[a-zA-Z][a-zA-Z0-9+-.]*:[^\s]*$/,message:"shall be valid URI"};e.hostname=e.hostname||{regexp:/^([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9\-]{0,61}[a-zA-Z0-9])(\.([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9\-]{0,61}[a-zA-Z0-9]))*$/,message:"shall be valid host name"}}function s(e){this.options=e||{};if(!this.options.messages){this.options.messages=n(this.options.gettext||function(e){return e})}this.formats=this.options.formats||{};a(this.formats);this.errors=[];this.res={valid:true,errors:this.errors}}s.prototype={toComparable:function(e){return typeof e==="object"?JSON.stringify(e):e},error:function(e,r,t,n){this.errors.push({code:e,message:this.options.messages[e]||t||function(){throw new Error("There is no message registered for error '"+e+"'")}(),value:r.self,arg:t,path:r.path.join(".")+(n?"."+n:"")})},errorIf:function(e,r,t,n,i){if(e){this.errors.push({code:r,message:this.options.messages[r]||n||function(){throw new Error("There is no message registered for error '"+r+"'")}(),value:t.self,arg:n,path:t.path.join(".")+(i?"."+i:"")})}},copyErrors:function(e){this.errors.splice.apply(this.errors,[this.errors.length,0].concat(e))},"[^required]":{prepare:function(e,r){if(!r.parent)return null;return{inline:"if (_ === undefined) ctx.stop()"}}},"[type=string]":{inline:function(e,r){if(typeof e!=="string")this.error("type.string",r)}},"[type=number]":{inline:function(e,r){if(typeof e!=="number")this.error("type.number",r)}},"[type=integer]":{inline:function(e,r){if(typeof e!=="number"||e%1!==0)this.error("type.integer",r)}},"[type=null]":{inline:function(e,r){if(e!==null)this.error("type.null",r)}},"[type=boolean]":{inline:function(e,r){if(typeof e!=="boolean")this.error("type.boolean",r)}},"[type=array]":{inline:function(e,r){if(!Array.isArray(e))this.error("type.array",r)}},"[type=object]":{inline:function(e,r){if(Array.isArray(e)||typeof e!=="object"||e===null)this.error("type.object",r)}},"[type]":function(e){if(Array.isArray(e.type)){var r=[];for(var t=0;t<e.type.length;t++){r.push(this["[type="+e.type[t]+"]"].inline)}return function(e,t,n){var i=this.errors;var a=[];this.errors=a;for(var s=0;s<r.length;s++){r[s].call(this,t,n)}this.errors=i;if(a.length===r.length){this.copyErrors(a)}}}},"[dependencies]":function(e,r){var t,n=[],i,a;for(t in e.dependencies){if(e.dependencies.hasOwnProperty(t)){i=e.dependencies[t];if(Array.isArray(i)){i={required:i}}a="dep"+t;r.compile(i,a);n.push("if (_.hasOwnProperty('"+t+"')) {");n.push("var res = ctx."+a+"(_);");n.push("if (!res.valid) { this.error('dependency', ctx, "+JSON.stringify(e.dependencies[t])+"); this.copyErrors(res.errors); }");n.push("}")}}return{inline:n.join("\n")}},"[allOf]":{inline:function(e,r){for(var t=0;t<r.allOf.length;t++){var n=r.allOf[t](e);if(!n.valid){this.error("allOf",r);this.copyErrors(n.errors)}}}},"[anyOf]":{inline:function(e,r){var t=[],n;for(var i=0;i<r.anyOf.length;i++){n=r.anyOf[i](e);t=t.concat(n.errors);if(n.valid)break}if(!n.valid){this.error("anyOf",r);this.copyErrors(t)}}},"[oneOf]":{inline:function(e,r){var t=0,n=[],i;for(var a=0;a<r.oneOf.length;a++){i=r.oneOf[a](e);n=n.concat(i.errors);if(i.valid)t++}if(t===0){this.error("oneOf.zero",r);this.copyErrors(n)}else if(t!==1){this.error("oneOf",r)}}},"[not]":{inline:function(e,r){var t=r.not(e);if(t.valid){this.error("not",r)}}},"[enum]":function(e){this.$enums=this.$enums||[];var r={};for(var t=0;t<e.enum.length;t++){var n=e.enum[t];r[this.toComparable(n)]=1}this.$enums.push(r);return{inline:"if(!this.$enums["+(this.$enums.length-1)+"][this.toComparable(_)]) this.error('type.enum', ctx, "+JSON.stringify(e.enum)+")"}},"[maxLength]":function(e){return{inline:"if (typeof _ === 'string' && _.length > "+e.maxLength+") this.error('type.string.maxLength', ctx, "+e.maxLength+")"}},"[minLength]":function(e){return{inline:"if (typeof _ === 'string' && _.length < "+e.minLength+") this.error('type.string.minLength', ctx, "+e.minLength+")"}},"[pattern]":function(e){return{inline:"if (typeof _ === 'string' && !_.match(/"+e.pattern+"/)) this.error('type.string.pattern', ctx, "+JSON.stringify(e.pattern)+")"}},"[format]":function(e){var r=this.formats[e.format];if(!r){throw new Error("Unknown format '"+e.format+"'. Did you forget to register it?")}return{inline:"if (typeof _ === 'string' && !_.match("+r.regexp+")) this.error('type.string.format."+e.format+"', ctx, "+JSON.stringify(r.message)+")"}},"[additionalItem=false]":{inline:function(e,r){this.error("type.array.additionalItems",r)}},"[minItems]":function(e){return{inline:"if(Array.isArray(_) && _.length < "+e.minItems+") this.error('type.array.minItems', ctx)"}},"[maxItems]":function(e){return{inline:"if(Array.isArray(_) && _.length > "+e.maxItems+") this.error('type.array.maxItems', ctx)"}},"[uniqueItems]":{inline:function(e,r){if(!Array.isArray(e)){return}var t={},n,i;for(n=0;n<e.length;n=n+1){i=this.toComparable(e[n]);this.errorIf(t[i],"type.array.uniqueItems",r,e[n]);t[i]=true}}},"[required][^properties]":function(e){var r=e.required;if(Array.isArray(r)){return function(e,t,n){if(!i(t))return;var a;for(a=0;a<r.length;a++){this.errorIf(!t.hasOwnProperty(r[a]),"type.object.required",n,null,r[a])}}}},"[properties]":function(e){e.$keys=Object.keys(e.properties);var r=(e.required||[]).concat(e.$keys.filter(function(r){return e.properties[r].required===true}));if(r.length>0){return function(e,t,n){if(!i(t))return;var a;for(a=0;a<r.length;a++){this.errorIf(!t.hasOwnProperty(r[a]),"type.object.required",n,null,r[a])}}}},"[maxProperties]":function(e){var r=e.maxProperties;return{inline:"if (typeof _ === 'object') this.errorIf(Object.keys(_).length > "+r+", 'type.object.maxProperties', ctx, "+r+")"}},"[minProperties]":function(e){var r=e.minProperties;return{inline:"if (typeof _ === 'object') this.errorIf(Object.keys(_).length < "+r+", 'type.object.minProperties', ctx, "+r+")"}},"[additionalProperty=false]":{inline:function(e,r){this.error("type.object.additionalProperties",r)}},"[multipleOf]":function(e){return{inline:"if (typeof _ === 'number' ) this.errorIf((_ / "+e.multipleOf+") % 1 !== 0, 'type.integer.multipleOf', ctx, "+e.multipleOf+")"}},"[minimum]":function(e){return{inline:"this.errorIf(_ "+(e.exclusiveMinimum?"<=":"<")+e.minimum+", 'type.number.minimum"+(e.exclusiveMinimum?".exclusive":"")+"', ctx, "+e.minimum+")"}},"[maximum]":function(e){return{inline:"this.errorIf(_ "+(e.exclusiveMaximum?">=":">")+e.maximum+", 'type.number.maximum"+(e.exclusiveMaximum?".exclusive":"")+"', ctx, "+e.maximum+")"}},done:{inline:function(){this.res.valid=this.errors.length===0;return this.res}},clone:function(){var e=new s(this.options);e.$enums=this.$enums;return e},reset:function(){this.errors=this.res.errors=[];this.res.valid=true}};s.factory=function(e){return function(){return new s(e)}};r.exports=s},{}]},{},[2])(2)});