(function(e){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=e()}else if(typeof define==="function"&&define.amd){define([],e)}else{var t;if(typeof window!=="undefined"){t=window}else if(typeof global!=="undefined"){t=global}else if(typeof self!=="undefined"){t=self}else{t=this}t.schemasaurus=e()}})(function(){var e,t,r;return function n(e,t,r){function i(o,a){if(!t[o]){if(!e[o]){var f=typeof require=="function"&&require;if(!a&&f)return f(o,!0);if(s)return s(o,!0);var u=new Error("Cannot find module '"+o+"'");throw u.code="MODULE_NOT_FOUND",u}var l=t[o]={exports:{}};e[o][0].call(l.exports,function(t){var r=e[o][1][t];return i(r?r:t)},l,l.exports,n,e,t,r)}return t[o].exports}var s=typeof require=="function"&&require;for(var o=0;o<r.length;o++)i(r[o]);return i}({1:[function(e,t,r){"use strict";function n(e){this.path=e?e.slice():[];this.stack=new Array(100);this.si=0;this.parent=null;this.property=null;this.self=null}n.prototype={reset:function(e,t){this.path=e?e.slice():[];this.self=t;this.si=0;this.parent=null;this.property=null},replace:function(e){this.parent[this.property]=e},remove:function(){delete this.parent[this.property]},push:function(e,t,r){this.path.push(e);this.stack[this.si]=[e,t,r];this.si=this.si+1;this.property=e;this.parent=t;this.self=r},stop:function(){this.stopped=true},isStopped:function(){if(this.stopped){this.stopped=false;return true}return false},pop:function(){this.si=this.si-1;this.path.pop();var e=this.stack[this.si];if(e){this.parent=e[0];this.property=e[1];this.self=e[2]}}};var i=n;function s(){throw new Error("Remote refs are not supported for now :(")}function o(e){return e.replace(/~0/g,"~").replace(/~1/g,"/")}function a(e,t,r){var n=decodeURI(r).split("#"),i=n[0],s=n[1].split("/").map(o),a=t,f;if(i!==""){a=e(i)}for(f=0;f<s.length;f=f+1){if(s[f]===""){continue}a=a[s[f]];if(a===undefined){throw new Error("Cannot find ref '"+r+"' in schema")}}return a}function f(e){var t="",r="  ",n,i,s,o;for(i=0;i<e.length;i=i+1){n=e[i].trim();s=n.indexOf("{")!==-1;o=n.indexOf("}")!==-1;if(o&&!s){t=t.substring(0,t.length-r.length)}n=t+n;if(s&&!o){t=t+r}e[i]=n}return e}var u=/(\[(\^?\w+)(=\w+)?\])/g;var l=/:([-\w]+)$/;function h(e){if(e===null){return null}var t=parseFloat(e);if(!isNaN(t)){return t}if(e==="true"){return true}if(e==="false"){return false}return e}function p(e,t){if(e.indexOf(":")!==-1||e.indexOf("[")!==-1){var r=l.exec(e),n=[],i,s,o,a;if(r){i=r[1]}r=u.exec(e);while(r){s=r[2][0]==="^";n.push({name:s?r[2].substring(1):r[2],not:s,value:r[3]?h(r[3].substring(1)):undefined});r=u.exec(e)}return function(r,s,f){var u,l=true;if(s!==i){return false}for(o=0;o<n.length;o=o+1){u=r[n[o].name];if(n[o].not){a=u===undefined||u!==n[o].value&&n[o].value!==undefined}else{a=u!==undefined&&(u===n[o].value||n[o].value===undefined)}if(!a){l=false;break}}if(l){return f(t[e],e)}}}}function c(e,t,r,o){if(!t||typeof t!=="function"){throw new Error("selectorCtor shall be a function")}r=r||{};r.ignoreAdditionalItems=r.ignoreAdditionalItems===undefined?false:r.ignoreAdditionalItems;var u=[],l=e,h=t(),d=[],m,g,y,v=0,x,b=[],A=new i(o),O=l,w=[];function $(e,t,r){var n,i,s;if(!y){y=[];for(i in h){s=p(i,h);if(s){y.push(s)}}}for(n=0;n<y.length;n=n+1){y[n](e,t,r)}}function I(){var e="i"+d.length;d.push(e);return e}function P(e,t,n,i,s){var o,a,f=false,l=!s;if(e.prepare||e.length===1||e.length===2){e=(e.prepare||e).call(h,i,A);f=true}if(!e){return}function p(e,r,i){if(!i){w.push(e)}var o=[];if(l){o.push("return")}o.push(i?"this['"+t+"'](":"innerFns["+(w.length-1)+"].call(this,");if(r!==undefined){o.push("schemas["+r+"], ")}o.push(n+", ctx)");u.push(o.join(" "));if(s){u.push("if (ctx.isStopped()) break "+s)}}u.push("//call "+t);if(e.inline){if(typeof e.inline==="function"&&r.noinline){p(e.inline)}else{x="label"+v++;o=e.inline.toString().replace(/^function\s*\([^)]*\)/,"").replace(/_/g,n);var c=o.indexOf("return")!==-1;if(s){o=o.replace(/ctx.stop\(\)/,"break "+s)}if(!l){o=o.replace(/return/g,"break "+x)}for(a in e){if(e.hasOwnProperty(a)&&a!=="inline"){o=o.replace(new RegExp(a,"g"),JSON.stringify(e[a]))}}u=u.concat((c?x+":{"+o+"}":o).split(/[\n\r]+/))}}else if(f){b.push(i);p(e,b.length-1)}else{b.push(i);p(e,b.length-1,true)}}A.compile=function(e,n){if(Array.isArray(e)){w.push(A[n]=e.map(function(e){return c(e,t,r)}))}else{w.push(A[n]=c(e,t,r,A.path.slice()))}u.push("ctx."+n+" = innerFns["+(w.length-1)+"]")};function F(e,t,n){var i,o,f;n=n||{};function l(r){var n=u.length+1,i="label"+v++;u.push(i+": {");$(e,r,function(r,n){P(r,n,t,e,i)});if(u.length===n){u.pop()}else{u.push("}")}}function h(r,n,i){return{parent:t,parentSchema:e,schemaPath:r,path:n||JSON.stringify(r),attr:i}}function p(t,r,n,i){var s={};s[r]=false;if(e[t]===false){F(s,i,h("*",n))}else if(typeof e[t]==="object"){F(e[t],i,h("*",n))}else{s[r]="allowed";F(s,i,h("*",n))}}function c(){var n,i,s;if(!r.ignoreAdditionalItems){n=I();u.push(n+" = {}")}for(o in e.properties){if(e.properties.hasOwnProperty(o)){s=I();u.push(s+" = "+t+" ? "+t+"."+o+" : undefined");if(!r.ignoreAdditionalItems){u.push(n+"."+o+" = true")}F(e.properties[o],s,h(o))}}if(!r.ignoreAdditionalItems){i=I();u.push("if (typeof "+t+" === 'object' && !Array.isArray("+t+")) for ("+i+" in "+t+") if ("+t+".hasOwnProperty("+i+")) {");s=I();u.push(s+" = "+t+"["+i+"]");for(o in e.patternProperties||{}){if(e.patternProperties.hasOwnProperty(o)){u.push("if (/"+o+"/.test("+i+")) {");F(e.patternProperties[o],s,h(o,i));u.push(n+"["+i+"] = true");u.push("}")}}u.push("if (!"+n+"["+i+"]) {");p("additionalProperties","additionalProperty",i,s);u.push("}");u.push("}")}}function d(){var n,i;if(!Array.isArray(e.items)){n=I();u.push("for ("+n+" = 0; "+n+" < ("+t+" ? "+t+".length : 0); "+n+"++) {");i=I();u.push(i+" = "+t+"["+n+"]");F(e.items,i,h("[]",n,"item"));u.push("}");if(!r.ignoreSchemaOnly){u.push("if (schemaOnly) {");F(e.items,"nil",h("[]",null,"item"));u.push("}")}}else{for(o=0;o<e.items.length;o=o+1){i=I();u.push(i+" = "+t+" ? "+t+"["+o+"] : undefined");F(e.items[o],i,h(o))}if(!r.ignoreAdditionalItems){n=I();u.push("for ("+n+" = "+e.items.length+"; "+n+" < ("+t+" ? "+t+".length : 0); "+n+"++) {");i=I();u.push(i+" = "+t+"["+n+"]");p("additionalItems","additionalItem",n,i);u.push("}")}}}if(e.$$visited){u.push("if ("+t+" !== undefined) self("+t+",ctx.path);");return}Object.defineProperty(e,"$$visited",{value:true,enumerable:false,configurable:true});if(e.$ref){F(a(r.loader||s,O,e.$ref),t,n);return}if(n.path){u.push("ctx.push("+n.path+", "+n.parent+","+t+")");A.push(n.schemaPath,n.parentSchema,e)}["oneOf","anyOf","allOf","not"].forEach(function(t){if(e[t]){A.compile(e[t],t)}});if(n.attr){l(n.attr)}l("start");l();f=[["properties","additionalProperties","patternProperties",c],["items","additionalItems",d]];for(i=0;i<f.length;i++){for(o=0;o<f[i].length-1;o++){if(e[f[i][o]]){f[i].pop()();break}}}l("end");if(n.attr){l(n.attr+"-end")}if(n.path){u.push("ctx.pop();");A.pop()}delete e.$$visited}F(l,"val");if(h.done){P(h.done,"done","val",l,null,true)}var q=f(u).map(function(e){return"{};".indexOf(e[e.length-1])===-1?e+";":e}).join("\n");q=["var self; selector._f = function(val, path) { var nil = undefined, schemaOnly = val === undefined"].concat(d).join(",")+";\nctx.reset(path, val);"+q+"}; self = function (val, path) {"+(h.reset?"selector.reset();":"")+" return selector._f(val, path) }; self.fn = selector._f; return self; ";try{g=new Function("selector","schemas","innerFns","ctx",q)}catch(_){console.error(q);throw _}var j=new n;var k=h.clone?h.clone():t();m=g(k,b,w,j);return m}t.exports=c},{}],2:[function(e,t,r){"use strict";var n=e("./compiler");var i=e("./v4validator");var s=e("./normalizer");t.exports={Validator:i,Normalizer:s,compile:n,newIterator:n,newValidator:function(e,t){return n(e,i.factory(t),t)},newNormalizer:function(e){return n(e,s.factory)}}},{"./compiler":1,"./normalizer":4,"./v4validator":5}],3:[function(e,t,r){"use strict";t.exports=function n(e){return{string:e("shall be a string"),"null":e("shall be null"),minLength:e("shall have length at least %d"),maxLength:e("shall have length no more than %d"),pattern:e("shall match pattern %s"),integer:e("shall be an integer"),multipleOf:e("shall be multiple of %d"),number:e("shall be a number"),minimum:e("shall be >= %d"),"minimum.exclusive":e("shall be > %d"),maximum:e("shall be <= %d"),"maximum.exclusive":e("shall be < %d"),"boolean":e("shall be boolean"),object:e("shall be object"),additionalProperties:e("shall not have additional properties"),minProperties:e("shall have at least %d properties"),maxProperties:e("shall have no more than %d properties"),array:e("shall be array"),additionalItems:e("shall not have additional items"),minItems:e("shall have at least %d items"),maxItems:e("shall have no more %d items"),uniqueItems:e("shall have unique items"),"enum":e("shall be one of values %s"),required:e("is required"),dependency:e("does not meet additional requirements for %s"),not:e("does not meet 'not' requirement"),oneOf:e("does not meet exactly one requirement"),"oneOf.zero":e("does not meet any requirement"),allOf:e("does not meet all requirements"),anyOf:e("does not meet any requirement"),custom:e("is not valid")}}},{}],4:[function(e,t,r){"use strict";function n(){}n.prototype={"[default]":function(e,t,r){if(t===null||t===undefined){r.replace(e.default)}},"[additionalProperty]":function(e,t,r){r.remove()},"[type]":function(e,t,r,n){if(t===null||t===undefined)return;switch(e.type){case"null":r.replace(null);break;case"string":r.replace(t.toString());break;case"integer":r.replace(parseInt(t));break;case"number":r.replace(parseFloat(t));break;case"boolean":var i=["true","on"].indexOf(t.toLowerCase())!=-1;var s=["false","off"].indexOf(t.toLowerCase())!=-1;r.replace(i?true:s?false:!!t);break;case"array":if(!Array.isArray(t)){r.replace([t])}break;case"object":break}},done:{inline:"return _"}};n.factory=function(){return new n};t.exports=n},{}],5:[function(e,t,r){"use strict";var n=e("./messages");function i(e){return typeof e==="object"&&!Array.isArray(e)&&e!==null}function s(e){e.email=e.email||{regexp:/^[^@]+@[^@]+$/,message:"shall be valid email"};e["date-time"]=e["date-time"]||{regexp:/^\d{4}-(?:0[0-9]{1}|1[0-2]{1})-[0-9]{2}[tT ]\d{2}:\d{2}:\d{2}(\.\d+)?([zZ]|[+-]\d{2}:\d{2})$/,message:"shall be valid date"};e.ipv4=e.ipv4||{regexp:/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/,message:"shall be valid ipv4 address"};e.ipv6=e.ipv6||{regexp:/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/,message:"shall be valid ipv6 address"};e.uri=e.uri||{regexp:/^[a-zA-Z][a-zA-Z0-9+-.]*:[^\s]*$/,message:"shall be valid URI"};e.hostname=e.hostname||{regexp:/^([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9\-]{0,61}[a-zA-Z0-9])(\.([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9\-]{0,61}[a-zA-Z0-9]))*$/,message:"shall be valid host name"}}function o(e){this.options=e||{};if(!this.options.gettext){this.options.gettext=function(e){return e}}if(!this.options.messages){this.options.messages=n(this.options.gettext)}this.custom=this.options.custom||{};this.formats=this.options.formats||{};s(this.formats);this.errors=[];this.res={valid:true,errors:this.errors}}o.prototype={toComparable:function(e){return typeof e==="object"?JSON.stringify(e):e},error:function(e,t,r,n){var i=this.$cm?this.options.gettext(this.$cm[e]):this.options.messages[e]||r||function(){throw new Error("There is no message registered for error '"+e+"'")}();delete this.$cm;this.errors.push({code:e,message:i,value:t.self,arg:r,path:t.path.slice()})},errorIf:function(e,t,r,n,i){if(e){this.error(t,r,n,i)}},copyErrors:function(e){this.errors.splice.apply(this.errors,[this.errors.length,0].concat(e))},"[messages]":function(e,t){this.$messages=this.$messages||[];this.$messages.push(e.messages);return{inline:"this.$cm = this.$messages["+(this.$messages.length-1)+"]"}},"[^required]":{prepare:function(e,t){if(!t.parent)return null;return{inline:"if (_ === undefined) ctx.stop()"}}},"[type=string]":{inline:function(e,t){if(typeof e!=="string")this.error("string",t)}},"[type=number]":{inline:function(e,t){if(typeof e!=="number")this.error("number",t)}},"[type=integer]":{inline:function(e,t){if(typeof e!=="number"||e%1!==0)this.error("integer",t)}},"[type=null]":{inline:function(e,t){if(e!==null)this.error("null",t)}},"[type=boolean]":{inline:function(e,t){if(typeof e!=="boolean")this.error("boolean",t)}},"[type=array]":{inline:function(e,t){if(!Array.isArray(e))this.error("array",t)}},"[type=object]":{inline:function(e,t){if(Array.isArray(e)||typeof e!=="object"||e===null)this.error("object",t)}},"[type]":function(e){if(Array.isArray(e.type)){var t=[];for(var r=0;r<e.type.length;r++){t.push(this["[type="+e.type[r]+"]"].inline)}return function(e,r,n){var i=this.errors;var s=[];this.errors=s;for(var o=0;o<t.length;o++){t[o].call(this,r,n)}this.errors=i;if(s.length===t.length){this.copyErrors(s)}}}},"[dependencies]":function(e,t){var r,n=[],i,s;for(r in e.dependencies){if(e.dependencies.hasOwnProperty(r)){i=e.dependencies[r];if(Array.isArray(i)){i={required:i}}s="dep"+r;t.compile(i,s);n.push("if (_.hasOwnProperty('"+r+"')) {");n.push("var res = ctx."+s+"(_);");n.push("if (!res.valid) { this.error('dependency', ctx, "+JSON.stringify(e.dependencies[r])+"); this.copyErrors(res.errors); }");n.push("}")}}return{inline:n.join("\n")}},"[allOf]":{inline:function(e,t){for(var r=0;r<t.allOf.length;r++){var n=t.allOf[r](e,t.path);if(!n.valid){this.error("allOf",t);this.copyErrors(n.errors)}}}},"[anyOf]":{inline:function(e,t){var r=[],n;for(var i=0;i<t.anyOf.length;i++){n=t.anyOf[i](e,t.path);r=r.concat(n.errors);if(n.valid)break}if(!n.valid){this.error("anyOf",t);this.copyErrors(r)}}},"[oneOf]":{inline:function(e,t){var r=0,n=[],i;for(var s=0;s<t.oneOf.length;s++){i=t.oneOf[s](e,t.path);n=n.concat(i.errors);if(i.valid)r++}if(r===0){this.error("oneOf.zero",t);this.copyErrors(n)}else if(r!==1){this.error("oneOf",t)}}},"[not]":{inline:function(e,t){var r=t.not(e,t.path);if(r.valid){this.error("not",t)}}},"[enum]":function(e){this.$enums=this.$enums||[];var t={};for(var r=0;r<e.enum.length;r++){var n=e.enum[r];t[this.toComparable(n)]=1}this.$enums.push(t);return{inline:"if(!this.$enums["+(this.$enums.length-1)+"][this.toComparable(_)]) this.error('enum', ctx, "+JSON.stringify(e.enum)+")"}},xLength:function(e,t,r){return{inline:"if (typeof _ === 'string' && _.length "+e+t+") this.error('"+r+"', ctx, "+t+")"}},"[maxLength]":function(e){return this.xLength(">",e.maxLength,"maxLength")},"[minLength]":function(e){return this.xLength("<",e.minLength,"minLength")},"[pattern]":function(e){return{inline:"if (typeof _ === 'string' && !_.match(/"+e.pattern+"/)) this.error('pattern', ctx, "+JSON.stringify(e.pattern)+")"}},"[format]":function(e){var t=this.formats[e.format];if(!t){throw new Error("Unknown format '"+e.format+"'. Did you forget to register it?")}return{inline:"if (typeof _ === 'string' && !_.match("+t.regexp+")) this.error('format."+e.format+"', ctx, "+JSON.stringify(t.message)+")"}},"[additionalItem=false]":{inline:function(e,t){this.error("additionalItems",t)}},xItems:function(e,t,r){return{inline:"if(Array.isArray(_) && _.length "+e+t+") this.error('"+r+"', ctx)"}},"[minItems]":function(e){return this.xItems("<",e.minItems,"minItems")},"[maxItems]":function(e){return this.xItems(">",e.maxItems,"maxItems")},"[uniqueItems]":{inline:function(e,t){if(!Array.isArray(e)){return}var r={},n,i;for(n=0;n<e.length;n=n+1){i=this.toComparable(e[n]);this.errorIf(r[i],"uniqueItems",t,e[n]);r[i]=true}}},processRequired:function(e){if(Array.isArray(e)){return function(t,r,n){if(!i(r))return;var s;for(s=0;s<e.length;s++){this.errorIf(!r.hasOwnProperty(e[s]),"required",n,null,e[s])}}}},"[required][^properties]":function(e){return this.processRequired(e.required)},"[properties]":function(e){e.$keys=Object.keys(e.properties);var t=(e.required||[]).concat(e.$keys.filter(function(t){return e.properties[t].required===true}));return this.processRequired(t)},xProperties:function(e,t,r){return{inline:"if (typeof _ === 'object') this.errorIf(Object.keys(_).length "+e+" "+t+", '"+r+"', ctx, "+t+")"}},"[maxProperties]":function(e){return this.xProperties(">",e.maxProperties,"maxProperties")},"[minProperties]":function(e){return this.xProperties("<",e.minProperties,"minProperties")},"[additionalProperty=false]":{inline:function(e,t){this.error("additionalProperties",t)}},"[multipleOf]":function(e){return{inline:"if (typeof _ === 'number' ) this.errorIf((_ / "+e.multipleOf+") % 1 !== 0, 'multipleOf', ctx, "+e.multipleOf+")"}},ximum:function(e,t,r,n){return{inline:"this.errorIf(_ "+e+(t?"=":"")+r+", '"+n+(t?".exclusive":"")+"', ctx, "+r+")"}},"[minimum]":function(e){return this.ximum("<",e.exclusiveMinimum,e.minimum,"minimum")},"[maximum]":function(e){return this.ximum(">",e.exclusiveMaximum,e.maximum,"maximum")},"[conform]":function(e,t){this.$custom=this.$custom||[];if(typeof e.conform==="function"){this.$custom.push(e.conform);return{inline:"this.errorIf(!this.$custom["+(this.$custom.length-1)+"](_, ctx), 'custom', ctx)"}}else{var r=[];for(var n in e.conform){if(e.conform.hasOwnProperty(n)){var i=this.custom[n];var s=e.conform[n].map(JSON.stringify).concat([""]).join(",");this.$custom.push(i);r.push("this.errorIf(!this.$custom["+(this.$custom.length-1)+"](_, "+s+" ctx), 'custom."+n+"', ctx, this.options.messages.custom)")}}return{inline:r.join("\n")}}},done:{inline:function(){this.res.valid=this.errors.length===0;return this.res}},clone:function(){var e=new o(this.options);e.$enums=this.$enums;e.$custom=this.$custom;e.$messages=this.$messages;return e},reset:function(){this.errors=this.res.errors=[];this.res.valid=true;delete this.$cm}};o.factory=function(e){return function(){return new o(e)}};t.exports=o},{"./messages":3}]},{},[2])(2)});